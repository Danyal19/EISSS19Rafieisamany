<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
<h1>Willkommen {{name}}</h1>
<pre>{{coords}}</pre>
<hr>
<h1>Personen in Ihrer NÃ¤he</h1>
<div id='map'></div>
<script type="text/javascript" src="https://leafletjs-cdn.s3.amazonaws.com/content/leaflet/master/leaflet.js"></script>
<script type="text/javascript" src="https://tiles.unwiredmaps.com/js/leaflet-unwired.js"></script>
<script type="text/javascript">
    let c=[];
    const coords=([{{coords}}].reverse());
    {{#each nearby}}
        c.push([{{this}}].reverse());
    {{/each}}

    let key = '{{key}}';
    let streets = L.tileLayer.Unwired({key: key, scheme: "streets"});
    let map = L.map('map', {
        center: coords,
        zoom: 14,
        scrollWheelZoom: true,
        layers: [streets]
    });
    L.control.scale().addTo(map);
    L.control.layers({
        "Streets": streets
    }).addTo(map);
    L.circle(coords, {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.5,
        radius: 1000
    }).addTo(map);
    L.marker(coords).addTo(map);
    c.forEach((c)=>{
        L.marker(c).addTo(map);
    });
</script>

